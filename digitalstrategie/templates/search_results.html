{% extends "base.html" %}
{% load wagtailcore_tags i18n %}

{% block meta_tag %}
    <title>{% trans 'Gemeinsam Digital: Berlin - full-text search' %}</title>
{% endblock %}

{% block content %}
    <div class="layout-grid__area--maincontent">
        <div class="modul-headline">
            <h1 class="title">
                {% trans 'Full-text search' %}
            </h1>
        </div>
        <form action="{% url 'search' %}" method="get">
            <div class="searchform-slot ">
                <div class="form-group">
                    <label class="aural" for="q">{% trans 'Search term' %}</label>
                    <div class="searchterm">
                        <div class="input-wrapper">
                            <i class="fas fa-search lens" aria-hidden="true"></i>
                            <input
                              class="form-control search"
                              value="{% if request.GET.q %}{{ request.GET.q }}{% endif %}"
                              placeholder="{% trans 'Search term' %}"
                              name="q"
                            >
                        </div>
                        <button class="button button--clean submit " type="submit" title="{% trans 'Search' context 'verb' %}">
                            <span class="aural">{% trans 'Search' context 'verb' %}</span><i class="fas fa-arrow-right icon" aria-hidden="true"></i>
                        </button>
                    </div>
                </div>
            </div>
        </form>

        {% if object_list %}
            <div class="modul-headline">
                <h2 class="title">
                    {% trans "Results of the full-text search" %}
                </h2>
            </div>
            <p>
            {% trans 'Your search for' %}"{{ request.GET.q }}".<br />
            </p>
            {% for result in object_list %}
               {% for highlight in result.highlights %}
                    <div class="searchresult-item">
                        <h3 class="title">
                            <a href="{% pageurl result %}">{{ result }}</a>
                        </h3>
                        <p class="text">
                            {{ highlight | safe }}
                        </p>
                        <p class="url">
                            <a
                              class="more"
                              aria-hidden="true"
                              href="{% pageurl result %}"
                            >
                                {{ result }}
                            </a>
                        </p>
                    </div>
                {% endfor %}
            {% endfor %}
        {% elif request.GET.q %}
            <div class="modul-headline">
                <h2 class="title">
                    {% trans 'No results found' %}
                </h2>
            </div>
        {% endif %}
    </div>
{% endblock %}

